/* --- Marker --- */

.ace_marker-layer .my-marker {
  position: absolute;
  z-index: 2;
  background-color: var(--marker-bg);
  border: 1px solid black;
  box-sizing: border-box;
  pointer-events: none;
}

/* base class for comment section dragger handle */
.ace_marker-layer .fpo-handle-start,
.ace_marker-layer .fpo-handle-end {
  position: absolute;
  background: transparent;   /* Text nicht überdecken */
  cursor: grab !important;   /* Hand-Cursor */
  pointer-events: auto;      /* Klickbar */
  user-select: none;         /* keine Textauswahl */
  z-index: 4;
}

/* comment section dragger handle */
.ace_marker-layer .fpo-handle-start::after,
.ace_marker-layer .fpo-handle-end::after {
  content: "";
  position: absolute;
  top: -2px;               /* etwas höher als Text */
  left: -2px;
  width: 5px;              /* dünn = Linie */
  height: 1.6em;           /* so hoch wie die Textzeile */
  background: var(--marker-bg);
  border: 1px solid rgb(0,0,0);
  box-sizing: border-box;
}



/* selected comment section */
.ace_marker-layer .my-marker.selected {
  box-shadow: inset var(--comment-shadow);
  outline: 1px dashed currentColor;
  outline-offset: -1px;
}

.ace_editor.fpo-dragging {
  cursor: grabbing;
}

/* To make not mark the text underneath the dragged comment section */ 
.ace_editor.fpo-dragging .ace_selection,
.ace_editor.fpo-dragging .ace_marker-layer .ace_selected-word {
  background: transparent !important;
}

/* --- Annotation --- */

.ace_gutter-cell.ace_info {
  /* Found icon on https://icon-sets.iconify.design/picon/?keyword=c&category=UI+Other+%2F+Mixed+Grid */
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDggOCI+PHBhdGggZmlsbD0iI2U4YTU1MiIgZD0iTTQgNkwxIDhWMWg2djciLz48L3N2Zz4=");
}

.ace_editor .ace_marker-layer .ace_active-line {
  z-index: 1;
  background: var(--active-line-bg) !important; 
}

.editor-toolbar-btn {
  border-radius: 0.65rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.35rem;
  line-height: 1;
  padding: 0.45rem 0.7rem !important;
  min-width: 2.5rem;
  min-height: 2.5rem;
  font-weight: 600;
  letter-spacing: 0.01em;
  transition: background-color 160ms ease, color 160ms ease, box-shadow 160ms ease, transform 140ms ease;
}

.editor-toolbar-btn i {
  font-size: 1rem;
  line-height: 1;
}

.editor-toolbar-btn--text {
  padding: 0.36rem 0.63rem !important;
  min-width: 2.25rem;
  min-height: 1.9rem;
  font-size: 0.95rem;
}

.editor-toolbar-btn--icon {
  padding: 0.2rem 0.2rem !important;
  min-width: 1.05rem;
  min-height: 1.05rem;
  border-radius: 0.55rem;
}

.editor-toolbar-btn--icon i {
  font-size: 0.9rem;
}

.editor-toolbar-btn--icon:not(.toolbar-btn--active):not(.btn-orange):not(.btn-blue) {
  background-color: transparent;
  box-shadow: none;
}

.editor-toolbar-btn--icon:not(.toolbar-btn--active):not(.btn-orange):not(.btn-blue):not(:disabled):hover {
  background-color: var(--toolbar-btn-hover-bg, #e9ecef);
  color: var(--toolbar-btn-hover-color, #212529);
  box-shadow:
    inset 0 0 0 2px var(--toolbar-btn-hover-border, #ced4da),
    0 2px 6px rgba(0, 0, 0, 0.08);
  transform: translateY(-1px);
}

.editor-toolbar-btn--icon:not(.toolbar-btn--active):not(.btn-orange):not(.btn-blue):not(:disabled):active {
  background-color: transparent;
  box-shadow: none;
  transform: none;
}

.editor-toolbar-btn small {
  font-size: 0.8rem;
  font-weight: 600;
}

.editor-toolbar-btn--default {
  background-color: var(--toolbar-btn-bg, #f8f9fa);
  color: var(--toolbar-btn-color, #212529);
  box-shadow:
    inset 0 0 0 2px var(--toolbar-btn-border, #dee2e6),
    0 1px 0 rgba(0, 0, 0, 0.04);
}

.editor-toolbar-btn--default:not(:disabled):hover {
  background-color: var(--toolbar-btn-hover-bg, #e9ecef);
  color: var(--toolbar-btn-hover-color, #212529);
  box-shadow:
    inset 0 0 0 2px var(--toolbar-btn-hover-border, #ced4da),
    0 2px 6px rgba(0, 0, 0, 0.08);
  transform: translateY(-1px);
}

.editor-toolbar-btn--default:not(:disabled):active {
  background-color: var(--toolbar-btn-active-bg, #dee2e6);
  box-shadow:
    inset 0 0 0 2px var(--toolbar-btn-active-border, #adb5bd),
    0 1px 2px rgba(0, 0, 0, 0.08);
  transform: translateY(0.5px) scale(0.99);
}

.editor-toolbar-btn--default:disabled {
  box-shadow: inset 0 0 0 2px transparent;
}

.toolbar-btn--active {
  background: var(--bs-primary);
  box-shadow:
    inset 0 0 0 2px var(--bs-primary),
    0 2px 6px rgba(13, 110, 253, 0.25);
  color: #fff;
}

.toolbar-btn--active i,
.toolbar-btn--active small {
  color: #fff;
}

.editor-toolbar-btn.icon-orange i {
  color: var(--btn-orange);
}

.editor-toolbar-btn.icon-orange:not(:disabled):hover i {
  color: rgba(var(--btn-orange-rgb, 253, 126, 20), 0.7);
}

.toolbar-btn--active:not(:disabled):hover {
  background: var(--bs-primary);
  background: rgba(var(--bs-primary-rgb, 13, 110, 253), 0.7);
  box-shadow:
    inset 0 0 0 2px rgba(var(--bs-primary-rgb, 13, 110, 253), 0.7),
    0 4px 10px rgba(13, 110, 253, 0.22);
  transform: translateY(-1px);
}

/* Keyboard focus */
.editor-toolbar-btn:focus-visible {
  outline: 2px solid currentColor;
  outline-offset: 2px;
}
