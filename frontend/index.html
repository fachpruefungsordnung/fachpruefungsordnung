<!doctype html>
<html>
  <head>
    <!-- Add the redirect script first, before any other scripts -->
    <script>
      // Redirect clean URLs to hash URLs
      (function() {
        var path = window.location.pathname;
        var search = window.location.search;
        
        // If we're not at the root and there's no hash, redirect to hash version
        if (path !== '/' && !window.location.hash) {
          var hashUrl = '/#' + path + search;
          window.location.replace(hashUrl);
        }
      })();
    </script>
    
    <script>
      class RawHtmlElement extends HTMLElement {
        connectedCallback() {
          this.innerHTML = this.getAttribute('html') || '';
        }
      }
      customElements.define('raw-html', RawHtmlElement);
    </script>

    <link rel="icon" type="image/png" href="favicon.png" />
    <title>FPO-Editor</title>
    
    <!-- First CSS to avoid FOUC Warning -->
    <!-- All CSS links -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous" />
    <link rel="stylesheet" href="static/app.css">
    
    <!-- External dependencies can stay in head -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <script src="static/custom-mode.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-tex.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/theme-github.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-language_tools.js"></script>
  </head>
  <body>
    <!-- Move your main PureScript bundle to the end of body -->
    <script src="index.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  </body>
</html>
